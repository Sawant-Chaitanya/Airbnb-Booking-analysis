# Airbnb Bookings Analysis - Python Project

## Introduction
Airbnb has revolutionized the way people travel by providing a unique, personalized way to experience the world. Since its inception in 2008, Airbnb has become a globally recognized platform for travelers and hosts alike. The vast amount of data generated by millions of listings on Airbnb is invaluable for security, business decisions, understanding user behavior, guiding marketing initiatives, and more.

This project focuses on exploring and analyzing the NYC Airbnb 2019 dataset, which contains around 49,000 observations with 16 columns, including both categorical and numeric values.

### Key Objectives
- Gain insights into different hosts and areas.
- Extract valuable information through predictions (e.g., locations, prices, reviews).
- Identify the busiest hosts and reasons for their popularity.
- Investigate variations in traffic among different areas and understand the underlying factors.

## Contents
1. [Acquiring and Loading Data](#1-acquiring-and-loading-data)
2. [Data Exploration](#2-data-exploration)
3. [Variable Identification and Understanding Data](#3-variable-identification-and-understanding-data)
4. [Handling NaN Values](#4-handling-nan-values)
5. [Exploring and Visualizing Data](#5-exploring-and-visualizing-data)
   - [Single Variable Analysis](#single-variable-analysis)
     - [Top 10 Hosts with the Most Listings](#top-10-hosts-with-the-most-listings)
     - [Neighbourhood Group vs. Number of Listings](#neighbourhood-group-vs-number-of-listings)
     - [Top 10 Neighbourhoods in NYC](#top-10-neighbourhoods-in-nyc)
     - [Average Reviews per Month for Top 10 Hosts](#average-reviews-per-month-for-top-10-hosts)
     - [Average Nights Stayed by Room Types](#average-nights-stayed-by-room-types)
   - [Bi-variable Analysis](#bi-variable-analysis)
     - [Room Types and Listings in Neighbourhood Groups](#room-types-and-listings-in-neighbourhood-groups)
     - [Monthly Reviews Variations with Room Types](#monthly-reviews-variations-with-room-types)
     - [Room Types and Their Relation with Availability](#room-types-and-their-relation-with-availability)
6. [Price Feature Analysis](#6-price-feature-analysis)
   - [Detecting Outliers Using Boxplot](#detecting-outliers-using-boxplot)
   - [Quantile Approach to Remove Outliers](#quantile-approach-to-remove-outliers)
   - [Room Types vs. Price in Different Neighbourhood Groups](#room-types-vs-price-in-different-neighbourhood-groups)
   - [Costliest and Cheapest Listings & Hosts in NYC](#costliest-and-cheapest-listings--hosts-in-nyc)
   - [Top Neighbourhoods with Respect to Average Price/Day](#top-neighbourhoods-with-respect-to-average-priceday)

## 1. Acquiring and Loading Data
```python
# Importing necessary libraries
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
from google.colab import drive

# Mounting Google Drive to access the dataset
drive.mount('/content/drive')

# Reading Airbnb NYC 2019 dataset
df_airbnb = pd.read_csv('/content/drive/MyDrive/AlmaBetter/Capstone Project/Airbnb Bookings Analysis (Team - databyte)/Airbnb NYC 2019 Data.csv')
df_airbnb.head(3)
```

## 2. Data Exploration
*Hidden cells containing exploratory data analysis.*

## 3. Variable Identification and Understanding Data
*Hidden cells containing variable identification and understanding of data.*

## 4. Handling NaN Values
*Hidden cells containing handling of NaN values.*

## 5. Exploring and Visualizing Data
### Single Variable Analysis
#### Top 10 Hosts with the Most Listings
```python
# Top 10 hosts with the most listings
top_host = df_airbnb.host_id.value_counts().head(10)
df_top_host = pd.DataFrame(top_host).reset_index()
df_top_host.rename(columns={'index':'host_id','host_id':'count'},inplace=True)

plt.figure(figsize=(15,8))
viz=sns.barplot(x='host_id', y='count', data=df_top_host, palette="PuBu")
viz.set_title('Hosts with the most listings in NYC', size=18)
viz.set_ylabel('Count of listings')
viz.set_xlabel('Host id\'s')
viz.set_xticklabels(viz.get_xticklabels())
plt.show()
```

#### Neighbourhood Group vs. Number of Listings
```python
# Neighbourhood group vs. number of listings
plt.figure(figsize=(15,8))
plt.rcParams['font.size'] = 15
df_airbnb['neighbourhood_group'].value_counts().plot(kind='bar',color='b', rot = 0)
plt.xlabel('Neighbourhood Group')
plt.ylabel('Total NYC listings')
plt.title('Count of no of listings in entire NYC of each neighbourhood group')
plt.show()
```

#### Top 10 Neighbourhoods in NYC
```python
# Top 10 neighbourhoods in NYC
plt.figure(figsize=(15,8))
plt.rcParams['font.size'] = 15
top_10_neigbours= df_airbnb['neighbourhood'].value_counts()[:10]
top_10_neigbours.plot(kind='bar',color='b', rot = 45)
plt.xlabel('Neighbourhood')
plt.ylabel('Counts in entire NYC')
plt.title('Top 10 neighbourhoods in entire NYC on the basis of count of listings')
plt.show()
```

#### Average Reviews per Month for Top 10 Hosts
```python
# Average reviews per month for top 10 hosts
plt.rcParams['figure.figsize'] = (15, 8)
plt.rcParams['font.size'] = 18
reviews_df=top10_reviewed_listings.groupby('host_name')['reviews_per_month'].mean()
reviews_df=reviews_df.reset_index().sort_values(by='reviews_per_month',ascending=False)
reviews_df.plot(x='host_name',y='reviews_per_month',kind='bar',color='b',rot = 0)
plt.ylabel('Reviews counts')
plt.xlabel('Host names')
plt.title('Average

 Reviews/month received by Top hosts')
plt.show()
```

#### Average Nights Stayed by Room Types
```python
# Average nights stayed by room types
plt.rcParams['figure.figsize'] = (15, 8)
plt.rcParams['font.size'] =18
df_airbnb.groupby('room_type')['minimum_nights'].mean().plot(kind='bar',color='b',rot = 0)
plt.title('Min Stays in different room types listed on Airbnb ')
plt.ylabel('Min Stays')
plt.xlabel('Room types')
plt.show()
```

## Bi-variable Analysis

### 1. Count of Each Room Types in Neighbourhood Group - Entire NYC

```python
# Visualizing the count of each room type in different neighbourhood groups
plt.rcParams['figure.figsize'] = (20, 8)
plt.rcParams['font.size'] = 18

# Count of each room types in neighbourhood group entire NYC
ax = sns.countplot(x='room_type', hue='neighbourhood_group', data=df_airbnb, palette='cubehelix')

# Adding percentage annotations to the plot
total = len(df_airbnb['room_type'])
for p in ax.patches:
    percentage = '{:.1f}%'.format(100 * p.get_height()/total)
    x = p.get_x() + p.get_width() / 2
    y = p.get_y() + p.get_height() + 0.02
    ax.annotate(percentage, (x, y), ha='center', bbox=dict(facecolor='white', alpha=.8))

plt.title('Count of each room types in neighbourhood group entire NYC', size=25)
plt.xlabel('Rooms')
plt.xticks(rotation=0)
plt.ylabel('Room Counts')

plt.show()
```

**Key Finding:** Manhattan has the highest number of Entire home/apt listings (around 27% of total) followed by Brooklyn (19.6%). Brooklyn, Queens, and Bronx have more private room types, while Manhattan dominates with Entire home/apt listings.

### 2. Monthly Reviews Variations with Room Types in Each Neighbourhood Group

```python
# Top 10 most reviewed listings in NYC
top10_reviewed_listings = df_airbnb.nlargest(10, 'reviews_per_month')
top10_reviewed_listings[['name', 'room_type', 'reviews_per_month', 'neighbourhood_group']]
```

```python
f, ax = plt.subplots(figsize=(15, 8))
plt.rcParams['font.size'] = 18

# Monthly reviews variations with room types in each neighbourhood groups
ax = sns.stripplot(x='room_type', y='reviews_per_month', hue='neighbourhood_group', dodge=True, data=df_airbnb, palette='Set2')
ax.set_title('Most Reviewed room types in each Neighbourhood Groups', size=18)
plt.show()
```

**Key Finding:** Private rooms receive the most reviews per month, especially in Manhattan. Entire home/apt listings in Manhattan and Queens also attract high reviews. Shared rooms receive fewer reviews, primarily from Staten Island and Bronx.

### 3. Room Types and Their Relation with Availability and Neighbourhood Groups

```python
# Room Location in neighbourhood groups
plt.figure(figsize=(15, 8))
plt.rcParams['font.size'] = 18
ax = sns.scatterplot(x='latitude', y='longitude', data=df_airbnb, hue='neighbourhood_group', palette='bright')
ax.set_title('Room Location in neighbourhood groups', size=18)
plt.show()
```

```python
# Distribution of type of rooms across NYC
plt.figure(figsize=(15, 8))
plt.rcParams['font.size'] = 18
ax = sns.scatterplot(x=df_airbnb['latitude'], y=df_airbnb['longitude'], hue=df_airbnb['room_type'], palette="icefire")
ax.set_title('Distribution of type of rooms across NYC')
plt.show()
```

**Key Finding:** Shared rooms are scarce across NYC, with 95% of listings being Private rooms or Entire/home apt. Guests predominantly prefer these room types, consistent with previous findings.

```python
# Listings availability in a year throughout NYC
f, ax = plt.subplots(figsize=(15, 8))
plt.rcParams['font.size'] = 18
ax = sns.scatterplot(data=df_airbnb, y='longitude', x='latitude', hue="availability_365", palette='RdYlGn', size='availability_365', sizes=(20, 300))

ax.set_title('Listings availability in a year throughout NYC')
plt.show()
```

**Key Finding:** Bronx and Staten Island have listings mostly available throughout the year, likely due to lower costs compared to Manhattan, Brooklyn, and Queens.

## 'Price' Feature Analysis

### Detecting Outliers Using Boxplot

```python
plt.boxplot(df_airbnb['price'])
plt.show()
```

**Key Finding:** The 'price' feature has many outliers, indicating the need for their removal for better analysis.

### Quantile Approach to Remove Outliers

```python
min_bound, max_bound = df_airbnb.price.quantile([0.01, 0.999])
min_bound, max_bound
```

```python
# Checking outliers
df_airbnb[df_airbnb.price < min_bound]
```

```python
# Checking Outliers
df_airbnb[df_airbnb.price > max_bound]
```

```python
# New dataset without outliers
df_airbnb_new_price = df_airbnb[(df_airbnb.price > min_bound) & (df_airbnb.price < max_bound)]
df_airbnb_new_price.head()
```

### 1. Room Types vs Price in Different Neighbourhood Groups

```python
# Room_type vs price
plt.rcParams['font.size'] = 12
g = sns.catplot(x="room_type", y="price", col="neighbourhood_group",
                data=df_airbnb_new_price, kind='bar', ci=None, saturation=.8, aspect=.8)
(g.set_axis_labels("", "Price ranges on room_types")
  .set_xticklabels(["Private room", "Entire home/apt", "Shared room"], rotation=90)
  .set(ylim=(0, 400))
  .despine(left=True))
plt.show()
```

**Key Finding:** Listings with Entire home/apt as the room type are prevalent in NYC, commanding higher prices. Manhattan has the highest prices, with Entire home/apt averaging nearly $240/night.

### 2. The Costliest and Cheapest Listings & Their Respective Hosts in Entire NYC

```python
# The costliest listings
df_airbnb_new_price.nlargest(5, 'price')[['name', 'neighbourhood_group', 'neighbourhood', 'host_name', 'room_type', 'price']]
```

```python
# The cheapest listings
df_airbnb_new_price.sort_values(by='price', ascending=True)[['name', 'neighbourhood_group', 'neighbourhood', 'host_name', 'room_type', 'price']][:5]
```

### 3. Top Neighbourhoods in Each Neighbourhood Group in NYC with Respect to Average Price/Day of Airbnb Listings

```python
df_grpn = df_airbnb_new_price.groupby(['neighbourhood_group', 'neighbourhood'])['price'].mean().reset_index()
top_neigh_each = df_grpn.loc[df_grpn.groupby('neighbourhood_group')['price'].idxmax()].sort_values(by='price', ascending=False)
top_neigh_each
```

```python
plt.rcParams['figure.figsize'] = (15, 8)
plt.rcParams['font.size'] = 18
top_neigh_each.plot.bar(x='neighbourhood', rot=0, title='Top neighbourhoods in each neighbourhood groups with respect to average price/day of Airbnb listings')

plt.xlabel('neighbourhoods')
plt.ylabel('price')
plt.show()
```

## Conclusion

- **High Demand in Manhattan:** Manhattan stands

 out with the highest number of Entire home/apt listings and the highest prices, reflecting the demand in this area.
- **Private Rooms in Brooklyn:** Brooklyn, Queens, and Bronx are more inclined towards private room types, suggesting a different preference compared to Manhattan.
- **Guest Preferences:** Majority of guests prefer Private rooms or Entire home/apt, as evident from the distribution and availability analysis.
- **Outlier Impact:** Removing outliers in the 'price' feature significantly impacts the average prices, providing more accurate insights.
- **Top Hosts and Neighbourhoods:** Identified top hosts, costliest and cheapest listings, and top neighbourhoods based on average price per day.

This comprehensive analysis yields valuable insights into user preferences, host performance, and geographical variations in the NYC Airbnb market.
